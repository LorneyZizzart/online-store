<page-header title="Productos"></page-header>

<div class="customizer-handle"
    matTooltip="Nuevo producto"
    cdkDrag
    (cdkDragStarted)="handleDragStart($event)">
    <button mat-fab  class="btn-add" (click)="newProduct()">
    <mat-icon aria-label="Add product">add</mat-icon>
    </button>
</div>

<mat-card class="m-y-24">
    <mtx-grid [data]="list"
        [columns]="columns"
        [loading]="loading"
        [cellTemplate]="{option:option, image: image, price:price}">
    </mtx-grid>    
    <ng-template #option let-row let-index="index" let-col="colDef">
        <button mat-icon-button [matMenuTriggerFor]="menu2" aria-label="Open Menu">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu2="matMenu">
            <button mat-menu-item   (click)="editProduct(row)">
                <mat-icon>edit</mat-icon>
                <span>Editar</span>
            </button>
            <button mat-menu-item (click)="deleteProduct(row)">
                <mat-icon>delete</mat-icon>
                <span>Eliminar</span>
            </button>
        </mat-menu>     
    </ng-template>


    <ng-template #image let-row let-index="index" let-col="colDef">
        <div style="width: 80px;">
            <img [src]="row.imgUrl || 'assets/images/img.png'" alt="" srcset="" width="100%">
        </div> 
    </ng-template>

    <ng-template #price let-row let-index="index" let-col="colDef">
        {{row.price ? row.price + ' $' : 'Gratis' }}
    </ng-template>
</mat-card>
